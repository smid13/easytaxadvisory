<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Report z치loh</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

    <!-- DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
    <style>
      /* Trochu lep코칤 zarovn치n칤 hlavi캜ek */
      th {
        white-space: nowrap;
      }
    </style>
</head>
<body class="p-3">
    <h1>Report z치loh - {{ date }}</h1>
    <a href="/excel" class="btn btn-success mb-3">游닌 St치hnout Excel</a>

    {{ table | safe }}

    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

    <script>
      $(document).ready(function() {
          var table = $('table').DataTable({
              "autoWidth": true,
              "pageLength": 25,
              "order": []
          });

          // Nastav칤me 코칤콏ky sloupc콢 podle nejdel코칤ho textu
          table.columns().every(function() {
              var maxLength = 0;
              var column = this;

              // Proch치z칤me v코echny bu켿ky ve sloupci
              column.nodes().each(function(cell) {
                  var textLength = $(cell).text().length;
                  if (textLength > maxLength) maxLength = textLength;
              });

              // P콏evod d칠lky textu na pixely (odhad)
              var widthPx = maxLength * 8 + 20; // 8 px na znak + 20 px padding

              // Nastaven칤 minim치ln칤 코칤콏ky sloupce
              $(column.header()).css('min-width', widthPx + 'px');
              $(column.nodes()).css('min-width', widthPx + 'px');
          });
      });
    </script>
</body>
</html>
